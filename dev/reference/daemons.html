<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Daemons (Set Persistent Processes) — daemons • mirai</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Daemons (Set Persistent Processes) — daemons"><meta name="description" content="Set daemons, or persistent background processes, to receive mirai()
requests. Specify n to create daemons on the local machine. Specify url
to receive connections from remote daemons (for distributed computing across
the network). Specify remote to optionally launch remote daemons via a
remote configuration. Dispatcher (enabled by default) ensures optimal
scheduling."><meta property="og:description" content="Set daemons, or persistent background processes, to receive mirai()
requests. Specify n to create daemons on the local machine. Specify url
to receive connections from remote daemons (for distributed computing across
the network). Specify remote to optionally launch remote daemons via a
remote configuration. Dispatcher (enabled by default) ensures optimal
scheduling."><meta property="og:image" content="https://mirai.r-lib.org/logo.png"><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-hide-below="1200" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="mirai.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mirai</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.5.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mirai.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/v01-reference.html">mirai - Reference Manual</a></li>
    <li><a class="dropdown-item" href="../articles/v02-promises.html">mirai - Promises (Shiny and Plumber)</a></li>
    <li><a class="dropdown-item" href="../articles/v03-serialization.html">mirai - Serialization (Arrow, ADBC, polars, torch)</a></li>
    <li><a class="dropdown-item" href="../articles/v04-parallel.html">mirai - Communications Backend for R</a></li>
    <li><a class="dropdown-item" href="../articles/v05-opentelemetry.html">mirai - OpenTelemetry</a></li>
    <li><a class="dropdown-item" href="../articles/v06-packages.html">mirai - For Package Authors</a></li>
    <li><a class="dropdown-item" href="../articles/v07-questions.html">mirai - Community FAQs</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2025/09/mirai-2-5-0/">mirai 2.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://shikokuchuo.net/posts/27-mirai-240/">mirai 2.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://shikokuchuo.net/posts/26-mirai-230/">mirai 2.3.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/mirai/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>

     <a href="https://deepwiki.com/r-lib/mirai" class="external-link"><img src="https://deepwiki.com/badge.svg" alt="Ask DeepWiki"></a>

  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Daemons (Set Persistent Processes)</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/mirai/blob/main/R/daemons.R" class="external-link"><code>R/daemons.R</code></a></small>
      <div class="d-none name"><code>daemons.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Set daemons, or persistent background processes, to receive <code><a href="mirai.html">mirai()</a></code>
requests. Specify <code>n</code> to create daemons on the local machine. Specify <code>url</code>
to receive connections from remote daemons (for distributed computing across
the network). Specify <code>remote</code> to optionally launch remote daemons via a
remote configuration. Dispatcher (enabled by default) ensures optimal
scheduling.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">daemons</span><span class="op">(</span></span>
<span>  <span class="va">n</span>,</span>
<span>  url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  remote <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dispatcher <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  sync <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  serial <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tls <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pass <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .compute <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>integer number of daemons to launch.</p></dd>


<dt id="arg-url">url<a class="anchor" aria-label="anchor" href="#arg-url"></a></dt>
<dd><p>if specified, a character string comprising a URL at which to
listen for remote daemons, including a port accepting incoming connections,
e.g. 'tcp://hostname:5555' or 'tcp://10.75.32.70:5555'. Specify a URL with
scheme 'tls+tcp://' to use secure TLS connections (for details see
Distributed Computing section below). Auxiliary function <code><a href="host_url.html">host_url()</a></code> may
be used to construct a valid host URL.</p></dd>


<dt id="arg-remote">remote<a class="anchor" aria-label="anchor" href="#arg-remote"></a></dt>
<dd><p>(required only for launching remote daemons) a configuration
generated by <code><a href="ssh_config.html">ssh_config()</a></code>, <code><a href="cluster_config.html">cluster_config()</a></code>, or <code><a href="remote_config.html">remote_config()</a></code>.</p></dd>


<dt id="arg-dispatcher">dispatcher<a class="anchor" aria-label="anchor" href="#arg-dispatcher"></a></dt>
<dd><p>logical value, whether to use dispatcher. Dispatcher runs
in a separate process to ensure optimal scheduling, and should normally be
kept on (for details see Dispatcher section below).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>(optional) additional arguments passed through to <code><a href="daemon.html">daemon()</a></code> if
launching daemons. These include <code>asyncdial</code>, <code>autoexit</code>, <code>cleanup</code>,
<code>output</code>, <code>maxtasks</code>, <code>idletime</code>, <code>walltime</code> and <code>tlscert</code>.</p></dd>


<dt id="arg-sync">sync<a class="anchor" aria-label="anchor" href="#arg-sync"></a></dt>
<dd><p>logical value, whether to evaluate mirai synchronously in the
current process. Setting to TRUE substantially changes the behaviour of
mirai by causing them to be evaluated immediately after creation. This
facilitates testing and debugging, e.g. via an interactive <code><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser()</a></code>. In
this case, arguments other than <code>seed</code> and <code>.compute</code> are disregarded.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>(optional) The default of NULL initializes L'Ecuyer-CMRG RNG
streams for each daemon, the same as base R's parallel package. Results are
statistically-sound, although generally non-reproducible, as which tasks
are sent to which daemons may be non-deterministic, and also depends on the
number of daemons.
<br> (experimental) supply an integer value to instead initialize a
L'Ecuyer-CMRG RNG stream for the compute profile. This is advanced for each
mirai evaluation, hence allowing for reproducible results, as the random
seed is always associated with a given mirai, independently of where it is
evaluated.</p></dd>


<dt id="arg-serial">serial<a class="anchor" aria-label="anchor" href="#arg-serial"></a></dt>
<dd><p>(optional, requires dispatcher) a configuration created by
<code><a href="serial_config.html">serial_config()</a></code> to register serialization and unserialization functions
for normally non-exportable reference objects, such as Arrow Tables or
torch tensors. If NULL, configurations registered with <code><a href="register_serial.html">register_serial()</a></code>
are automatically applied.</p></dd>


<dt id="arg-tls">tls<a class="anchor" aria-label="anchor" href="#arg-tls"></a></dt>
<dd><p>(optional for secure TLS connections) if not supplied,
zero-configuration single-use keys and certificates are automatically
generated when required. If supplied, <strong>either</strong> the character path to
a file containing the PEM-encoded TLS certificate and associated private
key (may contain additional certificates leading to a validation chain,
with the TLS certificate first), <strong>or</strong> a length 2 character vector
comprising (i) the TLS certificate (optionally certificate chain) and
(ii) the associated private key.</p></dd>


<dt id="arg-pass">pass<a class="anchor" aria-label="anchor" href="#arg-pass"></a></dt>
<dd><p>(required only if the private key supplied to <code>tls</code> is encrypted
with a password) For security, should be provided through a function that
returns this value, rather than directly.</p></dd>


<dt id="arg--compute">.compute<a class="anchor" aria-label="anchor" href="#arg--compute"></a></dt>
<dd><p>character value for the compute profile to use (each has its
own independent set of daemons), or NULL to use the 'default' profile.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly, logical <code>TRUE</code> when creating daemons and <code>FALSE</code> when
resetting.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Use <code>daemons(0)</code> to reset daemon connections:</p><ul><li><p>All connected daemons and/or dispatchers exit automatically.</p></li>
<li><p>Any as yet unresolved 'mirai' will return an 'errorValue' 19
(Connection reset).</p></li>
<li><p><code><a href="mirai.html">mirai()</a></code> reverts to the default behaviour of creating a new
background process for each request.</p></li>
</ul><p>If the host session ends, all connected dispatcher and daemon processes
automatically exit as soon as their connections are dropped.</p>
<p>Calling <code>daemons()</code> implicitly resets any existing daemons for the compute
profile with <code>daemons(0)</code>. Instead, <code><a href="launch_local.html">launch_local()</a></code> or <code><a href="launch_local.html">launch_remote()</a></code> may
be used to add daemons at any time without resetting daemons.</p>
    </div>
    <div class="section level2">
    <h2 id="local-daemons">Local Daemons<a class="anchor" aria-label="anchor" href="#local-daemons"></a></h2>



<p>Setting daemons, or persistent background processes, is typically more
efficient as it removes the need for, and overhead of, creating new processes
for each mirai evaluation. It also provides control over the total number of
processes at any one time.</p>
<p>Supply the argument <code>n</code> to set the number of daemons. New background
<code><a href="daemon.html">daemon()</a></code> processes are automatically launched on the local machine
connecting back to the host process, either directly or via dispatcher.</p>
    </div>
    <div class="section level2">
    <h2 id="dispatcher">Dispatcher<a class="anchor" aria-label="anchor" href="#dispatcher"></a></h2>



<p>By default <code>dispatcher = TRUE</code> launches a background process running
<code><a href="dispatcher.html">dispatcher()</a></code>. Dispatcher connects to daemons on behalf of the host, queues
tasks, and ensures optimal FIFO scheduling. Dispatcher also enables (i) mirai
cancellation using <code><a href="stop_mirai.html">stop_mirai()</a></code> or when using a <code>.timeout</code> argument to
<code><a href="mirai.html">mirai()</a></code>, and (ii) the use of custom serialization configurations.</p>
<p>Specifying <code>dispatcher = FALSE</code>, daemons connect directly to the host and
tasks are distributed in a round-robin fashion, with tasks queued at each
daemon. Optimal scheduling is not guaranteed as, depending on the duration of
tasks, they can be queued at one daemon while others remain idle. However,
this solution is the most resource-light, and suited to similar-length tasks,
or where concurrent tasks typically do not exceed available daemons.</p>
    </div>
    <div class="section level2">
    <h2 id="distributed-computing">Distributed Computing<a class="anchor" aria-label="anchor" href="#distributed-computing"></a></h2>



<p>Specify <code>url</code> as a character string to allow tasks to be distributed across
the network (<code>n</code> is only required in this case if also providing a launch
configuration to <code>remote</code>).</p>
<p>The host / dispatcher listens at this URL, utilising a single port, and
<code><a href="daemon.html">daemon()</a></code> processes dial in to this URL. Host / dispatcher automatically
adjusts to the number of daemons actually connected, allowing dynamic
upscaling / downscaling.</p>
<p>The URL should have a 'tcp://' scheme, such as 'tcp://10.75.32.70:5555'.
Switching the URL scheme to 'tls+tcp://' automatically upgrades the
connection to use TLS. The auxiliary function <code><a href="host_url.html">host_url()</a></code> may be used to
construct a valid host URL based on the computer's IP address.</p>
<p>IPv6 addresses are also supported and must be enclosed in square brackets
<code>[]</code> to avoid confusion with the final colon separating the port. For
example, port 5555 on the IPv6 loopback address ::1 would be specified as
'tcp://[::1]:5555'.</p>
<p>Specifying the wildcard value zero for the port number e.g. 'tcp://[::1]:0'
will automatically assign a free ephemeral port. Use <code><a href="status.html">status()</a></code> to inspect
the actual assigned port at any time.</p>
<p>Specify <code>remote</code> with a call to <code><a href="ssh_config.html">ssh_config()</a></code>, <code><a href="cluster_config.html">cluster_config()</a></code> or
<code><a href="remote_config.html">remote_config()</a></code> to launch (programatically deploy) daemons on remote
machines, from where they dial back to <code>url</code>. If not launching daemons,
<code><a href="launch_local.html">launch_remote()</a></code> may be used to generate the shell commands for manual
deployment.</p>
    </div>
    <div class="section level2">
    <h2 id="compute-profiles">Compute Profiles<a class="anchor" aria-label="anchor" href="#compute-profiles"></a></h2>



<p>If <code>NULL</code>, the <code>"default"</code> compute profile is used. Providing a character
value for <code>.compute</code> creates a new compute profile with the name specified.
Each compute profile retains its own daemons settings, and may be operated
independently of each other. Some usage examples follow:</p>
<p><strong>local / remote</strong> daemons may be set with a host URL and specifying
<code>.compute</code> as <code>"remote"</code>, which creates a new compute profile. Subsequent
<code><a href="mirai.html">mirai()</a></code> calls may then be sent for local computation by not specifying the
<code>.compute</code> argument, or for remote computation to connected daemons by
specifying the <code>.compute</code> argument as <code>"remote"</code>.</p>
<p><strong>cpu / gpu</strong> some tasks may require access to different types of daemon,
such as those with GPUs. In this case, <code>daemons()</code> may be called to set up
host URLs for CPU-only daemons and for those with GPUs, specifying the
<code>.compute</code> argument as <code>"cpu"</code> and <code>"gpu"</code> respectively. By supplying the
<code>.compute</code> argument to subsequent <code><a href="mirai.html">mirai()</a></code> calls, tasks may be sent to
either <code>cpu</code> or <code>gpu</code> daemons as appropriate.</p>
<p>Note: further actions such as resetting daemons via <code>daemons(0)</code> should
be carried out with the desired <code>.compute</code> argument specified.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="with_daemons.html">with_daemons()</a></code> and <code><a href="with_daemons.html">local_daemons()</a></code> for managing the compute
profile used locally.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># interactive()</span></span></span>
<span class="r-in"><span><span class="co"># Create 2 local daemons (using dispatcher)</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="status.html">status</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Reset to zero</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create 2 local daemons (not using dispatcher)</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span><span class="fl">2</span>, dispatcher <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="status.html">status</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Reset to zero</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set up dispatcher accepting TLS over TCP connections</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span>url <span class="op">=</span> <span class="fu"><a href="host_url.html">host_url</a></span><span class="op">(</span>tls <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="status.html">status</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Reset to zero</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set host URL for remote daemons to dial into</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span>url <span class="op">=</span> <span class="fu"><a href="host_url.html">host_url</a></span><span class="op">(</span><span class="op">)</span>, dispatcher <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="status.html">status</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Reset to zero</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use with() to evaluate with daemons for the duration of the expression</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">daemons</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="mirai.html">mirai</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getpid.html" class="external-link">Sys.getpid</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">m2</span> <span class="op">&lt;-</span> <span class="fu"><a href="mirai.html">mirai</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getpid.html" class="external-link">Sys.getpid</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">m1</span><span class="op">[</span><span class="op">]</span>, <span class="va">m2</span><span class="op">[</span><span class="op">]</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Launch daemons on remotes 'nodeone' and 'nodetwo' using SSH</span></span></span>
<span class="r-in"><span><span class="co"># connecting back directly to the host URL over a TLS connection:</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span></span></span>
<span class="r-in"><span>  url <span class="op">=</span> <span class="fu"><a href="host_url.html">host_url</a></span><span class="op">(</span>tls <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  remote <span class="op">=</span> <span class="fu"><a href="ssh_config.html">ssh_config</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ssh://nodeone'</span>, <span class="st">'ssh://nodetwo'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Launch 4 daemons on the remote machine 10.75.32.90 using SSH tunnelling:</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>  url <span class="op">=</span> <span class="fu"><a href="host_url.html">local_url</a></span><span class="op">(</span>tcp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  remote <span class="op">=</span> <span class="fu"><a href="ssh_config.html">ssh_config</a></span><span class="op">(</span><span class="st">'ssh://10.75.32.90'</span>, tunnel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># Synchronous mode</span></span></span>
<span class="r-in"><span><span class="co"># mirai are run in the current process - useful for testing and debugging</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span>sync <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="mirai.html">mirai</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getpid.html" class="external-link">Sys.getpid</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">[</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 7104</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Synchronous mode restricted to a specific compute profile</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span>sync <span class="op">=</span> <span class="cn">TRUE</span>, .compute <span class="op">=</span> <span class="st">"sync"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="with_daemons.html">with_daemons</a></span><span class="op">(</span><span class="st">"sync"</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="mirai.html">mirai</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getpid.html" class="external-link">Sys.getpid</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">daemons</span><span class="op">(</span><span class="fl">0</span>, .compute <span class="op">=</span> <span class="st">"sync"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">[</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 7104</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/shikokuchuo" class="external-link">Charlie Gao</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer></body></html>

