<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SSH Remote Launch Configuration — ssh_config • mirai</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="SSH Remote Launch Configuration — ssh_config"><meta name="description" content="Generates a remote configuration for launching daemons over SSH, with the
option of SSH tunnelling."><meta property="og:description" content="Generates a remote configuration for launching daemons over SSH, with the
option of SSH tunnelling."><meta property="og:image" content="https://mirai.r-lib.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="mirai.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mirai</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.3.0.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mirai.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/mirai-daemons.html">Daemons</a></li>
    <li><a class="dropdown-item" href="../articles/mirai-map.html">Mirai Map</a></li>
    <li><a class="dropdown-item" href="../articles/mirai-promises.html">Promises - Shiny and Plumber</a></li>
    <li><a class="dropdown-item" href="../articles/mirai-serialization.html">Serialization - Arrow, ADBC, polars, torch</a></li>
    <li><a class="dropdown-item" href="../articles/mirai-xparallel.html">Communications Backend for R</a></li>
    <li><a class="dropdown-item" href="../articles/packages.html">For Package Authors</a></li>
    <li><a class="dropdown-item" href="../articles/questions.html">Community FAQs</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/mirai/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>SSH Remote Launch Configuration</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/mirai/blob/main/R/launchers.R" class="external-link"><code>R/launchers.R</code></a></small>
      <div class="d-none name"><code>ssh_config.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates a remote configuration for launching daemons over SSH, with the
option of SSH tunnelling.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ssh_config</span><span class="op">(</span></span>
<span>  <span class="va">remotes</span>,</span>
<span>  tunnel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  timeout <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  command <span class="op">=</span> <span class="st">"ssh"</span>,</span>
<span>  rscript <span class="op">=</span> <span class="st">"Rscript"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-remotes">remotes<a class="anchor" aria-label="anchor" href="#arg-remotes"></a></dt>
<dd><p>the character URL or vector of URLs to SSH into, using the
'ssh://' scheme and including the port open for SSH connections (defaults
to 22 if not specified), e.g. 'ssh://10.75.32.90:22' or 'ssh://nodename'.</p></dd>


<dt id="arg-tunnel">tunnel<a class="anchor" aria-label="anchor" href="#arg-tunnel"></a></dt>
<dd><p>[default FALSE] logical value, whether to use SSH tunnelling.
If TRUE, requires the <code><a href="daemons.html">daemons()</a></code> <code>url</code> hostname to be '127.0.0.1'. See
the 'SSH Tunnelling' section below for further details.</p></dd>


<dt id="arg-timeout">timeout<a class="anchor" aria-label="anchor" href="#arg-timeout"></a></dt>
<dd><p>[default 10] maximum time allowed for connection setup in
seconds.</p></dd>


<dt id="arg-command">command<a class="anchor" aria-label="anchor" href="#arg-command"></a></dt>
<dd><p>the command used to effect the daemon launch on the remote
machine as a character string (e.g. <code>"ssh"</code>). Defaults to <code>"ssh"</code> for
<code>ssh_config</code>, although may be substituted for the full path to a specific
SSH application. The default NULL for <code>remote_config</code> does not carry out
any launches, but causes <code><a href="launch_local.html">launch_remote()</a></code> to return the shell commands for
manual deployment on remote machines.</p></dd>


<dt id="arg-rscript">rscript<a class="anchor" aria-label="anchor" href="#arg-rscript"></a></dt>
<dd><p>[default "Rscript"] assumes the R executable is on the
search path. Replace with the full path of the Rscript executable on the
remote machine if necessary. If launching on Windows, <code>"Rscript"</code> should be
replaced with <code>"Rscript.exe"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list in the required format to be supplied to the <code>remote</code> argument
of <code><a href="daemons.html">daemons()</a></code> or <code><a href="launch_local.html">launch_remote()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="ssh-direct-connections">SSH Direct Connections<a class="anchor" aria-label="anchor" href="#ssh-direct-connections"></a></h2>



<p>The simplest use of SSH is to execute the daemon launch command on a remote
machine, for it to dial back to the host / dispatcher URL.</p>
<p>It is assumed that SSH key-based authentication is already in place. The
relevant port on the host must also be open to inbound connections from the
remote machine, and is hence suitable for use within trusted networks.</p>
    </div>
    <div class="section level2">
    <h2 id="ssh-tunnelling">SSH Tunnelling<a class="anchor" aria-label="anchor" href="#ssh-tunnelling"></a></h2>



<p>Use of SSH tunnelling provides a convenient way to launch remote daemons
without requiring the remote machine to be able to access the host. Often
firewall configurations or security policies may prevent opening a port to
accept outside connections.</p>
<p>In these cases SSH tunnelling offers a solution by creating a tunnel once the
initial SSH connection is made. For simplicity, this SSH tunnelling
implementation uses the same port on both host and daemon. SSH key-based
authentication must already be in place, but no other configuration is
required.</p>
<p>To use tunnelling, set the hostname of the <code><a href="daemons.html">daemons()</a></code> <code>url</code> argument to be
'127.0.0.1'. Using <code><a href="host_url.html">local_url()</a></code> with <code>tcp = TRUE</code> also does this for you.
Specifying a specific port to use is optional, with a random ephemeral port
assigned otherwise. For example, specifying 'tcp://127.0.0.1:5555' uses the
local port '5555' to create the tunnel on each machine. The host listens
to '127.0.0.1:5555' on its machine and the remotes each dial into
'127.0.0.1:5555' on their own respective machines.</p>
<p>This provides a means of launching daemons on any machine you are able to
access via SSH, be it on the local network or the cloud.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="cluster_config.html">cluster_config()</a></code> for cluster job scheduler launch configurations,
or <code><a href="remote_config.html">remote_config()</a></code> for generic configurations.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># direct SSH example</span></span></span>
<span class="r-in"><span><span class="fu">ssh_config</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ssh://10.75.32.90:222"</span>, <span class="st">"ssh://nodename"</span><span class="op">)</span>, timeout <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $command</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ssh"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-o ConnectTimeout=5 -fTp 222" "10.75.32.90"                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "."                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args[[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-o ConnectTimeout=5 -fTp 22" "nodename"                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "."                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rscript</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Rscript"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $quote</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $tunnel</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># SSH tunnelling example</span></span></span>
<span class="r-in"><span><span class="fu">ssh_config</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ssh://10.75.32.90:222"</span>, <span class="st">"ssh://nodename"</span><span class="op">)</span>, tunnel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $command</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ssh"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-o ConnectTimeout=10 -fTp 222" "10.75.32.90"                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "."                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args[[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-o ConnectTimeout=10 -fTp 22" "nodename"                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "."                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rscript</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Rscript"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $quote</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $tunnel</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># launch 2 daemons on the remote machines 10.75.32.90 and 10.75.32.91 using</span></span></span>
<span class="r-in"><span><span class="co"># SSH, connecting back directly to the host URL over a TLS connection:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="daemons.html">daemons</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  url <span class="op">=</span> <span class="fu"><a href="host_url.html">host_url</a></span><span class="op">(</span>tls <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  remote <span class="op">=</span> <span class="fu">ssh_config</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ssh://10.75.32.90:222"</span>, <span class="st">"ssh://10.75.32.91:222"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># launch 2 daemons on the remote machine 10.75.32.90 using SSH tunnelling:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="daemons.html">daemons</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  url <span class="op">=</span> <span class="fu"><a href="host_url.html">local_url</a></span><span class="op">(</span>tcp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  remote <span class="op">=</span> <span class="fu">ssh_config</span><span class="op">(</span><span class="st">"ssh://10.75.32.90"</span>, tunnel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Charlie Gao, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

