---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r}
#| include: false
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# mirai <a href="https://mirai.r-lib.org/" alt="mirai"><img src="man/figures/logo.png" alt="mirai logo" align="right" width="120"/></a>

<!-- badges: start -->
[![CRAN status](https://www.r-pkg.org/badges/version/mirai)](https://CRAN.R-project.org/package=mirai)
[![R-universe status](https://r-lib.r-universe.dev/badges/mirai)](https://r-lib.r-universe.dev/mirai)
[![R-CMD-check](https://github.com/r-lib/mirai/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/r-lib/mirai/actions/workflows/R-CMD-check.yaml)
[![Codecov test coverage](https://codecov.io/gh/r-lib/mirai/graph/badge.svg)](https://app.codecov.io/gh/r-lib/mirai)
[![DOI](https://zenodo.org/badge/459341940.svg)](https://zenodo.org/badge/latestdoi/459341940)
<!-- badges: end -->

### ミライ

**Minimalist Async Evaluation Framework for R**

Async • Distributed • Reactive

### Installation

```{r}
#| label: cran
#| eval: false
install.packages("mirai")
```

### Quick Start

`mirai()` evaluates an R expression asynchronously in a parallel process.

`daemons()` sets up persistent background processes for parallel computations.

```{r}
#| label: exec
library(mirai)
daemons(5)

m <- mirai({
  Sys.sleep(1)
  100 + 42
})

mp <- mirai_map(1:9, \(x) {
  Sys.sleep(1)
  x^2
})

m
m[]

mp
mp[.flat]

daemons(0)
```

### Design Philosophy

**Advanced Architecture**: Built on [nanonext](https://github.com/r-lib/nanonext/) and [NNG](https://nng.nanomsg.org/), leveraging modern networking and concurrency over IPC, TCP/IP and secure TLS transports.

**Superior Performance**: Delivers 1,000x greater responsiveness than alternatives, with zero-latency event-driven promises optimized for real-time applications.

**For Production**: Provides correct defaults, requiring explicit evaluation with no reliance on global variables, ensuring 100% transparent and deterministic results.

**Reliable at Scale**: Proven capacity for millions of concurrent tasks across thousands of connections, demonstrated in demanding real-world life sciences workflows.

**Modular Flexibility**: Deploy across local, remote (SSH, SSH tunneling), and HPC environments (Slurm, SGE, PBS, LSF), with modular compute profiles allowing seamless distribution to your compute of choice.

### Powers the R Ecosystem

mirai serves as a foundation for asynchronous and parallel computing in the R ecosystem:

[<img alt="R parallel" src="https://www.r-project.org/logo/Rlogo.png" width="40" height="31" />](https://mirai.r-lib.org/articles/v04-parallel.html) &nbsp; Implements the first official alternative communications backend for R, the 'MIRAI' parallel cluster, fulfilling a feature request by R-Core.

[<img alt="purrr" src="https://purrr.tidyverse.org/logo.png" width="40" height="46" />](https://purrr.tidyverse.org) &nbsp; Powers parallel map for the purrr functional programming toolkit, a core tidyverse package.

[<img alt="Shiny" src="https://github.com/rstudio/shiny/raw/main/man/figures/logo.png" width="40" height="46" />](https://mirai.r-lib.org/articles/v02-promises.html) &nbsp; Primary async backend for Shiny with full ExtendedTask support, providing next-level responsiveness and scalability.

[<img alt="plumber2" src="https://github.com/posit-dev/plumber2/raw/main/man/figures/logo.svg" width="40" height="46" />](https://mirai.r-lib.org/articles/v02-promises.html) &nbsp; Built-in async evaluator enabling the `@async` tag in plumber2.

[<img alt="tidymodels" src="https://www.tidymodels.org/images/tidymodels.png" width="40" height="46" />](https://tune.tidymodels.org/) &nbsp; A core parallel processing infrastructure provider for tidymodels.

[<img alt="torch" src="https://torch.mlverse.org/css/images/hex/torch.png" width="40" height="46" />](https://mirai.r-lib.org/articles/v03-serialization.html) &nbsp; Seamless use of torch tensors, models and optimizers across parallel processes.

[<img alt="Arrow" src="https://arrow.apache.org/img/arrow-logo_hex_black-txt_white-bg.png" width="40" height="46" />](https://mirai.r-lib.org/articles/v03-serialization.html) &nbsp; Query databases seamlessly over ADBC connections in the Arrow format.

[<img alt="Polars" src="https://github.com/pola-rs/polars-static/raw/master/logos/polars_logo_blue.svg" width="40" height="46" />](https://mirai.r-lib.org/articles/v03-serialization.html) &nbsp; R Polars leverages mirai's serialization registration mechanism for transparent use of all Polars objects.

[<img alt="targets" src="https://github.com/ropensci/targets/raw/main/man/figures/logo.png" width="40" height="46" />](https://docs.ropensci.org/targets/) &nbsp; Targets uses crew as its default high-performance computing backend. Crew is a distributed worker launcher extending mirai to different computing platforms.

### Acknowledgments

[Will Landau](https://github.com/wlandau/) for being instrumental in shaping development of the package, from initiating the original request for persistent daemons, through to orchestrating robustness testing for the high performance computing requirements of crew and targets.

[Joe Cheng](https://github.com/jcheng5/) for integrating the 'promises' method to work seamlessly within Shiny, and prototyping event-driven promises.

[Luke Tierney](https://github.com/ltierney/) of R Core, for discussion on L'Ecuyer-CMRG streams to ensure statistical independence in parallel processing, and making it possible for mirai to be the first 'alternative communications backend for R'.

[Travers Ching](https://github.com/traversc) for a novel idea in extending the original custom serialization support in the package.

[Hadley Wickham](https://github.com/hadley), [Henrik Bengtsson](https://github.com/HenrikBengtsson/), [Daniel Falbel](https://github.com/dfalbel/), and [Kirill Müller](https://github.com/krlmlr/) for many deeply-appreciated insights and discussions.

--

**Links**: [mirai](https://mirai.r-lib.org/) • [nanonext](https://nanonext.r-lib.org/) • [CRAN HPC Task View](https://cran.r-project.org/view=HighPerformanceComputing)

Please note that this project is released with a [Contributor Code of Conduct](https://mirai.r-lib.org/CODE_OF_CONDUCT.html). By participating in this project you agree to abide by its terms.
